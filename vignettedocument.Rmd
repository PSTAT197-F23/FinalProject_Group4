---
title: "Clustering Methods"
author: "Manuri Alwis, Kayla Katakis, Kylie Maeda, Jennifer Rink, Jade Thai"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

Your repository should contain:

1.  A brief .README summarizing repo content and listing the best references on your topic for a user to consult after reviewing your vignette if they wish to learn more

2.  A primary vignette document that explains methods and walks through implementation line-by-line (similar to an in-class or lab activity)

3.  At least one example dataset

4.  A script containing commented codes appearing in the vignette

# **K-means clustering**

K-means clustering is an unsupervised machine learning algorithm. Among unsupervised machine learning algorithms, it is one of the simplest and most popular. These algorithms usually make inferences from data by only looking at the independent variables and not at the dependent variable, also known as the outcome. The objective of k-means is to group similar data points together (into clusters) and find underlying patterns. In order to do so, this algorithm looks for a fixed number of clusters in the data. The "k" in k-means refers to the number of clusters. You will define the target number k, which represents the number of centroids you want in the data. The centroid is the center of the cluster. Every data point is assigned to a cluster through reducing the in-cluster sum of squares. Basically, the k-means algorithm finds k centroids and assigns each data point the nearest cluster, while keeping the centroids as small as possible. The "means" in k-means refers to averaging of the data.

```{r}
# load packages
library(tidyverse)

# read in data
housing <- read.csv('data/housing.csv', header = TRUE)
head(housing)
```

```{r}
# normalize data
housing_norm <- scale(housing)
head(housing_norm)

```

```{r}
# initialize list of inertias (TSS within)
inertias <- c()

# get inertias for different values of k
set.seed(888)
for (k in 1:15) {
  model <- kmeans(housing_norm, centers = k)
  inertias <- c(inertias, model$tot.withinss)
}

```

```{r}
# plot inertia against k
ggplot() +
  geom_line(aes(x = 1:15, y = inertias)) +
  geom_point(aes(x = 1:15, y = inertias)) +
  labs(title = "Elbow Method Plot", x = "Number of Clusters (k)", y = "Inertia")

```

```{r}
# perform k-means clustering with k = 5
kmeans <- kmeans(housing_norm, 5)

```

```{r}
# append cluster assignments to the data
housing$cluster <- kmeans$cluster

# display the cluster assignments
print(kmeans$cluster)
```

```{r}
# display the centroids of each cluster
print(kmeans$centers)
```

```{r}
# cluster plots
ggplot(housing, aes(MedInc, log(Population), color = factor(cluster))) +
  geom_point()
ggplot(housing, aes(MedHouseVal, MedInc, color = factor(cluster))) +
  geom_point()
```

```{r}
# clusters on map of california
ggplot(housing, aes(Longitude, Latitude, color = factor(cluster))) +
  geom_point()
```
